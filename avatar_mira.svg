<svg id="avatar-mira"
     viewBox="-40 -40 190 190" width="110" height="110"
     xmlns="http://www.w3.org/2000/svg" role="img" aria-labelledby="title desc"
     style="--level:0.9; overflow: visible" preserveAspectRatio="xMidYMid meet"
     overflow="visible">
  <title id="title">Avatar MIRA</title>
  <desc id="desc">Anillo arcoíris con halo y ecualizador centrado animado, sin recortes.</desc>

  <defs>
    <!-- Degradado arcoíris -->
    <linearGradient id="rainbow" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#ff3c3c">
        <animate attributeName="stop-color" values="#ff3c3c;#ffbe30;#35e835;#359bff;#8f38f7;#ff3c3c" dur="6s" repeatCount="indefinite"/>
      </stop>
      <stop offset="50%" stop-color="#ffbe30">
        <animate attributeName="stop-color" values="#ffbe30;#35e835;#359bff;#8f38f7;#ff3c3c;#ffbe30" dur="6s" repeatCount="indefinite"/>
      </stop>
      <stop offset="100%" stop-color="#35e835">
        <animate attributeName="stop-color" values="#35e835;#359bff;#8f38f7;#ff3c3c;#ffbe30;#35e835" dur="6s" repeatCount="indefinite"/>
      </stop>
    </linearGradient>

    <!-- Halo MUY amplio para que no se recorte -->
    <filter id="glow" filterUnits="userSpaceOnUse"
            x="-80" y="-80" width="280" height="280">
      <feGaussianBlur stdDeviation="3.2" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <style>
      /* Ecualizador activo por defecto */
      .bar { transform-origin: center bottom; animation: bounce 1.2s ease-in-out infinite;
             fill: url(#rainbow); vector-effect: non-scaling-stroke; }
      svg.paused .bar { animation-play-state: paused; }

      .b1 { animation-delay: 0ms; }
      .b2 { animation-delay: 120ms; } /* barra central con mayor amplitud */
      .b3 { animation-delay: 240ms; }

      @keyframes bounce {
        0%,100% { transform: scaleY(calc(0.35 + 0.25 * var(--level))); }
        50%     { transform: scaleY(calc(1.00 + 0.70 * var(--level))); }
      }

      @media (prefers-reduced-motion: reduce) {
        * { animation-duration: 0.001s !important; animation-iteration-count: 1 !important; }
      }
    </style>
  </defs>

  <!-- Anillo (con mucho aire alrededor) -->
  <circle cx="55" cy="55" r="44"
          stroke="url(#rainbow)" stroke-width="8" stroke-linecap="round"
          fill="none" filter="url(#glow)" vector-effect="non-scaling-stroke">
    <animate attributeName="r" values="44;49;44" dur="1.4s" repeatCount="indefinite"/>
    <animate attributeName="stroke-width" values="8;12;8" dur="1.4s" repeatCount="indefinite"/>
    <animate attributeName="stroke-opacity" values="0.7;1;0.7" dur="1.4s" repeatCount="indefinite"/>
  </circle>

  <!-- Ecualizador centrado -->
  <g transform="translate(55,60)">
    <rect class="bar b1" x="-14" y="0"  width="6" height="16" rx="3"/>
    <rect class="bar b2" x="-3"  y="-4" width="6" height="22" rx="3"/>
    <rect class="bar b3" x="8"   y="2"  width="6" height="14" rx="3"/>
  </g>
</svg>
